!function(){function n(a,e){var t,l={api_key:e.api_key||a("*[data-lob-key]").attr("data-lob-key"),strictness:function(e){var t=["strict","normal","relaxed","passthrough"];{if(e&&-1<t.indexOf(e))return e;var s=a("form[data-lob-verify]").attr("data-lob-verify");return s&&-1<t.indexOf(s)?s:"normal"}}(e.strictness),denormalize:"false"!==a("input[data-lob-secondary]").attr("data-lob-secondary"),stylesheet:void 0!==(t=e.stylesheet)?!!t:0<a("*[data-lob-suggestion-stylesheet]").length,styles:e.styles||{color:"#666666",bgcolor:"#fefefe",bordercolor:"#a8a8a8",activecolor:"#117ab8",activebgcolor:"#eeeeee"},elements:e.elements||{form:a("form[data-lob-verify]"),message:a("*[data-lob-verify-message]").hide(),primary:a("input[data-lob-primary]"),primaryMsg:a("*[data-lob-primary-message]").hide(),secondary:a("input[data-lob-secondary]"),secondaryMsg:a("*[data-lob-secondary-message]").hide(),city:a("input[data-lob-city]"),cityMsg:a("*[data-lob-city-message]").hide(),state:a("*[data-lob-state]"),stateMsg:a("*[data-lob-state-message]").hide(),zip:a("input[data-lob-zip]"),zipMsg:a("*[data-lob-zip-message]").hide()},messages:e.messages||{primary_line:"Enter the Primary address.",city_state_zip:"Enter City and State (or Zip).",zip:"Enter a valid Zip.",undeliverable:"The address could not be verified.",deliverable_missing_unit:"Enter a Suite or Unit.",deliverable_unnecessary_unit:"Suite or Unit unnecessary.",deliverable_incorrect_unit:"Incorrect Unit. Please confirm.",notify:"The address has been standardized.",confirm:"The address has been standardized. Please confirm and resubmit.",DEFAULT:"Unknown Error. The address could not be verified."},apis:e.apis||{verify:"https://api.lob.com/v1/us_verifications",autocomplete:"https://api.lob.com/v1/us_autocompletions"},do:{init:function(){n(a,LobAddressElementsConfig)}}};function s(e,t){return a("*[data-lob-suggestion-"+t+"]").attr("data-lob-suggestion-"+t)||e.styles[t]}function d(e){return"primary_line is required or address is required"===e?"primary_line":"zip_code is required or both city and state are required"===e?"city_state_zip":"zip_code must be in a valid zip or zip+4 format"===e?"zip":e in l.messages?e:"DEFAULT"}function i(e,t){var s=a._data(e[0],"events");s[t].unshift(s[t].pop())}if(l.stylesheet||a("<style>").prop("type","text/css").html("                .algolia-autocomplete {                    width: 100%;                }                .aa-dropdown-menu {                    width: 100%;                    border: 1px solid "+s(l,"bordercolor")+";                    border-top: 0;                    background-color: "+s(l,"bgcolor")+";                    overflow: hidden;                    border-radius: 0 0 .25rem .25rem;                    margin-top:-5px;                }                .aa-suggestion {                    cursor: pointer;                    padding: 6px 12px;                    color: "+s(l,"color")+";                }                .aa-suggestion:hover,                .aa-suggestion:active,                .aa-suggestion.aa-cursor  {                    color: "+s(l,"activecolor")+";                    background-color: "+s(l,"activebgcolor")+";                }                .aa-suggestion div {                    white-space: nowrap !important;                    overflow: hidden;                    text-overflow: ellipsis;                }                .aa-suggestion span {                    font-size: .8em;                }").appendTo("head"),l.elements.primary.length&&"false"!==l.elements.primary.attr("data-lob-primary")&&(l.do.autocomplete=function(e,t){if(e.match(/[A-Za-z0-9]/)){var s=new XMLHttpRequest;s.open("POST",l.apis.autocomplete,!0),s.setRequestHeader("Content-Type","application/json"),l.api_key&&s.setRequestHeader("Authorization","Basic "+btoa(l.api_key+":")),s.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status)try{var e=JSON.parse(s.responseText);t(e.suggestions)}catch(e){t(null)}else t(null)},s.send(JSON.stringify({address_prefix:e,city:l.elements.city.val(),zip_code:l.elements.zip.val(),state:l.elements.state.val(),geo_ip_sort:!0}))}return!1},l.do.apply=function(e){l.elements.primary.autocomplete("val",e.primary_line),l.elements.secondary.val(""),l.elements.city.val(e.city),l.elements.state.val(e.state),l.elements.zip.val(e.zip_code)},l.elements.primary.autocomplete({hint:!1},{source:l.do.autocomplete,templates:{suggestion:function(e){var t=a("<div></div>"),s=a("<span></span>");return t.text(e.primary_line+" "),s.text(e.city+", "+e.state+" "+e.zip_code),t.append(s),t}},cache:!1}).on("autocomplete:selected",function(e,t){l.do.apply(t)})),l.elements.form.length&&("passthrough"===l.strictness||l.elements.message.length)){function m(e){var t,s,a,i=function(e,t){var s=e.components.secondary_designator;if(e.secondary_line||!1===l.denormalize)return{secondary_line:e.secondary_line,primary_line:e.primary_line};if(s&&t){var a=e.primary_line.split(s);return{secondary_line:s+" "+a[1],primary_line:a[0]}}return{secondary_line:e.secondary_line,primary_line:e.primary_line}}(e,!!l.elements.secondary.val()),r=l.address={primary:i.primary_line,secondary:i.secondary_line,city:e.components&&e.components.city||"",state:e.components&&e.components.state||"",zip:(s=e.components,a=[],s.zip_code&&a.push(s.zip_code),s.zip_code_plus_4&&a.push(s.zip_code_plus_4),a.length?a.join("-"):"")};for(var n in r)r.hasOwnProperty(n)&&(r[n].toUpperCase()==l.elements[n].val().toUpperCase()||"zip"===n&&5===l.elements[n].val().length&&0==r[n].indexOf(l.elements[n].val())||(t=!0),l.elements[n].val(r[n]));return t}l.do.message=function(e){e&&(l.elements.message.text(e.msg).show("slow"),r[e.type]&&r[e.type](l.messages[e.type]))};var r={primary_line:function(e){l.elements.primaryMsg.text(e).show("slow")},city_state_zip:function(e){l.elements.cityMsg.text(e).show("slow"),l.elements.stateMsg.text(e).show("slow"),l.elements.zipMsg.text(e).show("slow")},zip:function(e){l.elements.zipMsg.text(e).show("slow")},deliverable_missing_unit:function(e){!1===l.denormalize&&l.elements.primaryMsg.text(e).show("slow")||l.elements.secondaryMsg.text(e).show("slow")},deliverable_unnecessary_unit:function(e){!1===l.denormalize&&l.elements.primaryMsg.text(e).show("slow")||l.elements.secondaryMsg.text(e).show("slow")},deliverable_incorrect_unit:function(e){!1===l.denormalize&&l.elements.primaryMsg.text(e).show("slow")||l.elements.secondaryMsg.text(e).show("slow")}};l.do.verify=function(n){l.submit="passthrough"===l.strictness,l.confirmed=function(){if("passthrough"!==l.strictness&&l.address){for(var e in l.address)if(l.address.hasOwnProperty(e)&&l.elements[e].val().toUpperCase()!==l.address[e].toUpperCase())return!1;return!0}return!1}();var o=new XMLHttpRequest;return o.open("POST",l.apis.verify,!0),o.setRequestHeader("Content-Type","application/json"),l.api_key&&o.setRequestHeader("Authorization","Basic "+btoa(l.api_key+":")),o.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var e=function(e){try{return JSON.parse(e)}catch(e){return console.log("ERR",e),{error:{message:"DEFAULT"}}}}(o.responseText);if(this.status&&200!==this.status||e.statusCode&&200!==e.statusCode){t=d((e=e&&e.body||e).error.message);n({msg:l.messages[t],type:t})}else if(e=e&&e.body||e,s=e,a=l,i=this.status,r=m(s),!i||"deliverable"===s.deliverability&&!r||"undeliverable"===s.deliverability&&a.confirmed&&"relaxed"===a.strictness||"deliverable_missing_unit"===s.deliverability&&a.confirmed&&"strict"!==a.strictness||"deliverable_unnecessary_unit"===s.deliverability&&a.confirmed&&"strict"!==a.strictness||"deliverable_incorrect_unit"===s.deliverability&&a.confirmed&&"strict"!==a.strictness)n(null,!0);else if("deliverable"===e.deliverability&&"passthrough"===l.strictness)n({msg:l.messages.notify,type:"notify"});else if("deliverable"===e.deliverability)n({msg:l.messages.confirm,type:"confirm"});else{var t=d(e.deliverability);n({msg:l.messages[t],type:t})}}var s,a,i,r},o.send(JSON.stringify({primary_line:l.elements.primary.val(),secondary_line:l.elements.secondary.val(),city:l.elements.city.val(),state:l.elements.state.val(),zip_code:l.elements.zip.val()})),!1},l.elements.form.on("submit",function s(e){return e.stopImmediatePropagation(),e.preventDefault(),l.elements.message.hide(),l.elements.primaryMsg.hide(),l.elements.secondaryMsg.hide(),l.elements.cityMsg.hide(),l.elements.stateMsg.hide(),l.elements.zipMsg.hide(),l.do.verify(function(e,t){l.submit?(l.do.message(e),l.elements.form.off("submit",s),l.submitted=!0,l.elements.form.submit(),l.elements.form.on("submit",s),i(l.elements.form,"submit")):t?(l.elements.form.off("submit",s),l.elements.form.submit()):l.do.message(e)})}),i(l.elements.form,"submit")}return l}var s="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js",a="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.37.0/autocomplete.jquery.min.js",i={load:function(){var e=Array.prototype.slice.call(arguments[0]),t=i[e.shift()];t&&t.apply(this,e)},jquery:function(){if(window.jQuery)i.load(arguments);else{var e=arguments,t=document.createElement("script");t.onload=function(){i.load(e)},t.src=s,document.getElementsByTagName("body")[0].appendChild(t)}},jquery_autocomplete:function(){if(window.jQuery.fn.autocomplete)i.load(arguments);else{var e=document.createElement("script"),t=arguments;e.onload=function(){i.load(t)},e.src=a,document.getElementsByTagName("body")[0].appendChild(e)}},address_elements:function(){if(window.LobAddressElements)i.load(arguments);else{var e=window.LobAddressElementsConfig||{};window.LobAddressElements=new n(window.jQuery,e),i.load(arguments)}}};i.load(["jquery","jquery_autocomplete","address_elements"])}();
//# sourceMappingURL=lob-address-elements-1.0.0.min.js.map